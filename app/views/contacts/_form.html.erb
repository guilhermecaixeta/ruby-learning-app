<%= form_with(model: contact, local: true) do |form| %>
  <section class="row mb-3">
    <% if contact.errors.any? %>
      <section id="error_explanation">
        <h2><%= pluralize(contact.errors.count, "error") %> <%= t 'Message.Error.Contact' %></h2>
        <ul>
          <% contact.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </section>
    <% end %>
    <section class="col-6 mb-3">
      <%= form.label :name, class: "form-label" %>
      <%= form.text_field :name, class: "form-control" %>
    </section>
    <section class="col-6 mb-3">
      <%= form.label :email, class: "form-label" %>
      <%= form.text_field :email, class: "form-control" %>
    </section>
    <section class="col-6 mb-3">
      <%= form.label :kind, class: "form-label" %>
      <%= form.collection_select(:kind_id, @kinds, :id, :description, {}, {:class => "form-select"}) %>
    </section>
    <section id="phones" class="col-6 mb-3">
      <section class="mb-3">
        <%= link_to_add_association('Add Phone', form, :phones, 'data-association-insertion-method' => "after" ) %>
      </section>
      <%= form.fields_for :phones do |phone_form|%>
        <%= render "phone_fields", f: phone_form %>
      <% end %>
    </section>
    <%= form.fields_for :address do |address_form|%>
      <section class="col-6 mb-3">
        <%= address_form.label :address, class: "form-label" %>
        <%= address_form.text_field :street, class: "form-control" %>
      </section>
      <section class="col-6 mb-3">
        <%= address_form.label :city, class: "form-label" %>
        <%= address_form.text_field :city, class: "form-control" %>
      </section>
      <section class="col-6 mb-3">
        <%= address_form.label :state, class: "form-label" %>
        <%= address_form.select :state, options_for_states(@contact.address.state), {}, {:class => "form-select"} %>
      </section>
    <% end %>
    <section class="col-6 mb-3">
      <%= form.label :rmk, class: "form-label" %>
      <%= form.text_area :rmk, class: "form-control" %>
    </section>
  </section>
  <section class="actions row mb-3">
    <section class="col-2">
      <%= form.submit t("Nav.Menu-item.Send"), class: "btn btn-outline-info" %>
    </section>
    <% if action_name == 'edit'  %>
      <section class="col-2">
        <%= link_to t('Nav.Menu-item.Show'), @contact, class: "btn btn-outline-secondary" %>
      </section>
    <% end %>
    <section class="col-2">
      <%= link_to t('Nav.Menu-item.Back'), contacts_path, class: "btn btn-outline-warning" %>
    </section>
  </section>
<% end %>
